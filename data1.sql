-- H2 2.2.224; 
;              
CREATE USER IF NOT EXISTS "SA" SALT '6379d13532d22ee8' HASH '5059f5ca929ac61589a8548a6947b690575fdc1f346641efcc722922aec3a020' ADMIN;          
CREATE CACHED TABLE "PUBLIC"."LOCATIONS"(
    "ID" INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL,
    "CITY" CHARACTER VARYING(255),
    "COUNTRY" CHARACTER VARYING(255),
    "RBF_ID" INTEGER,
    "WEATHER_STATION_ID" INTEGER
);         
ALTER TABLE "PUBLIC"."LOCATIONS" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_5" PRIMARY KEY("ID");     
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.LOCATIONS;
CREATE CACHED TABLE "PUBLIC"."RBF"(
    "ID" INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL,
    "BIKE" NUMERIC(38, 2),
    "CAR" NUMERIC(38, 2),
    "CURRENCY" CHARACTER VARYING(255),
    "SCOOTER" NUMERIC(38, 2)
);      
ALTER TABLE "PUBLIC"."RBF" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_1" PRIMARY KEY("ID");           
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.RBF;      
CREATE CACHED TABLE "PUBLIC"."WEATHER_OBSERVATIONS"(
    "ID" INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL,
    "AIRTEMPERATURE" FLOAT(24),
    "PHENOMENON" CHARACTER VARYING(255),
    "TIMESTAMP" TIMESTAMP(6),
    "WIND_SPEED" FLOAT(24),
    "STATION_ID" INTEGER
);  
ALTER TABLE "PUBLIC"."WEATHER_OBSERVATIONS" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_7" PRIMARY KEY("ID");          
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.WEATHER_OBSERVATIONS;     
CREATE CACHED TABLE "PUBLIC"."WEATHER_STATIONS"(
    "ID" INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL,
    "LATITUDE" FLOAT(53),
    "LONGITUDE" FLOAT(53),
    "NAME" CHARACTER VARYING(255),
    "WMO_CODE" INTEGER
);   
ALTER TABLE "PUBLIC"."WEATHER_STATIONS" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_8" PRIMARY KEY("ID");              
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.WEATHER_STATIONS;         
ALTER TABLE "PUBLIC"."LOCATIONS" ADD CONSTRAINT "PUBLIC"."UK_G1YVESKFD8OVICLUV4P3T0I7G" UNIQUE("WEATHER_STATION_ID");          
ALTER TABLE "PUBLIC"."LOCATIONS" ADD CONSTRAINT "PUBLIC"."UK_BW0FKU230LECCPHP9OB196MY8" UNIQUE("RBF_ID");      
ALTER TABLE "PUBLIC"."LOCATIONS" ADD CONSTRAINT "PUBLIC"."FKR602T4JQRY9PDNYEPHRTT6CEV" FOREIGN KEY("WEATHER_STATION_ID") REFERENCES "PUBLIC"."WEATHER_STATIONS"("ID") NOCHECK; 
ALTER TABLE "PUBLIC"."WEATHER_OBSERVATIONS" ADD CONSTRAINT "PUBLIC"."FKBCFKF2RWCMEF544XJMLL46I4B" FOREIGN KEY("STATION_ID") REFERENCES "PUBLIC"."WEATHER_STATIONS"("ID") NOCHECK;              
ALTER TABLE "PUBLIC"."LOCATIONS" ADD CONSTRAINT "PUBLIC"."FKAOUIFB0W5UCU68JLX9AWT8J4O" FOREIGN KEY("RBF_ID") REFERENCES "PUBLIC"."RBF"("ID") NOCHECK;          
